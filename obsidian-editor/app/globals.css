@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");
@import "tailwindcss";

/* ============ Theme Variables ============ */
:root {
  --bg-primary: #ffffff;
  --bg-secondary: #f6f6f6;
  --bg-tertiary: #ebebeb;
  --bg-hover: #e8e8e8;
  --bg-active: #ddd;
  --bg-input: #ffffff;
  --border: #e0e0e0;
  --border-light: #eee;
  --text-primary: #1e1e1e;
  --text-secondary: #555;
  --text-muted: #888;
  --text-faint: #aaa;
  --accent: #7c3aed;
  --accent-light: #8b5cf6;
  --code-bg: #f4f4f4;
  --code-text: #e06c75;
  --code-block-bg: #f8f8f8;
  --code-block-text: #383a42;
  --code-block-border: #e8e8e8;
  --scrollbar: #ccc;
  --scrollbar-hover: #aaa;
  --checkbox-bg: #e8e8e8;
  --checkbox-border: #bbb;
  --strikethrough: #999;
}

html.dark {
  --bg-primary: #1e1e1e;
  --bg-secondary: #262626;
  --bg-tertiary: #2b2b2b;
  --bg-hover: #2a2a2a;
  --bg-active: #333;
  --bg-input: #2a2a2a;
  --border: #2b2b2b;
  --border-light: #333;
  --text-primary: #e0e0e0;
  --text-secondary: #dcddde;
  --text-muted: #888;
  --text-faint: #555;
  --accent: #7c3aed;
  --accent-light: #a78bfa;
  --code-bg: #2d2d2d;
  --code-text: #e06c75;
  --code-block-bg: #262626;
  --code-block-text: #abb2bf;
  --code-block-border: #333;
  --scrollbar: #3a3a3a;
  --scrollbar-hover: #4a4a4a;
  --checkbox-bg: #262626;
  --checkbox-border: #444;
  --strikethrough: #666;
}

* {
  @apply box-border;
}

html,
body {
  @apply m-0 p-0 w-full h-full overflow-hidden;
  font-family:
    "Inter",
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    system-ui,
    sans-serif;
}

body {
  background: var(--bg-primary);
  color: var(--text-secondary);
}

/* Scrollbar */
::-webkit-scrollbar {
  @apply w-[6px] h-[6px];
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: var(--scrollbar);
  border-radius: 9999px;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-hover);
}

/* ============ TipTap Editor ============ */
.ProseMirror {
  @apply px-8 py-4 h-full w-full focus:outline-none leading-relaxed;
  color: var(--text-secondary);
  font-size: 15px;
}

.ProseMirror > * + * {
  margin-top: 0.5em;
}

.ProseMirror p {
  color: var(--text-secondary);
  @apply leading-[1.7] mb-1;
}

.ProseMirror p.is-editor-empty:first-child::before {
  color: var(--text-faint);
  @apply pointer-events-none float-left h-0;
  content: "Start typing...";
}

.ProseMirror h1 {
  @apply text-[28px] font-bold mt-6 mb-2;
  color: var(--text-primary);
}
.ProseMirror h2 {
  @apply text-[22px] font-semibold mt-5 mb-2;
  color: var(--text-primary);
}
.ProseMirror h3 {
  @apply text-[18px] font-semibold mt-4 mb-2;
  color: var(--text-primary);
}
.ProseMirror h4,
.ProseMirror h5,
.ProseMirror h6 {
  @apply font-semibold mt-3 mb-2;
  color: var(--text-primary);
}

.ProseMirror strong {
  @apply font-semibold;
  color: var(--text-primary);
}
.ProseMirror em {
  @apply italic;
  color: var(--text-secondary);
}
.ProseMirror u {
  @apply underline;
}
.ProseMirror s {
  @apply line-through;
  color: var(--strikethrough);
}

/* Inline code */
.ProseMirror code {
  background: var(--code-bg);
  color: var(--code-text);
  @apply px-1 py-0.5 rounded text-[13px] font-mono;
}

/* Code block */
.ProseMirror pre {
  background: var(--code-block-bg);
  border: 1px solid var(--code-block-border);
  @apply rounded-lg p-4 overflow-x-auto my-3;
}
.ProseMirror pre code {
  color: var(--code-block-text);
  @apply bg-transparent px-0 py-0 text-[13px];
}

/* Lists */
.ProseMirror ul {
  color: var(--text-secondary);
  @apply list-disc my-2 pl-6;
}
.ProseMirror ol {
  color: var(--text-secondary);
  @apply list-decimal my-2 pl-6;
}
.ProseMirror li {
  @apply mb-0.5;
}

/* Blockquote */
.ProseMirror blockquote {
  border-left: 3px solid var(--accent);
  @apply pl-4 italic my-3 py-1;
  color: var(--text-muted);
}

/* Link */
.ProseMirror a {
  color: var(--accent);
  @apply underline decoration-[#7c3aed]/40 hover:decoration-[#7c3aed] transition-all;
}

/* Horizontal rule */
.ProseMirror hr {
  border-top: 1px solid var(--border-light);
  @apply my-6;
}

/* Task list */
.ProseMirror ul[data-type="taskList"] {
  @apply list-none pl-0;
}
.ProseMirror li[data-type="taskItem"] {
  @apply flex items-start gap-2 my-1;
}
.ProseMirror li[data-type="taskItem"] label {
  @apply flex items-center gap-2 cursor-pointer mt-0.5;
}
.ProseMirror li[data-type="taskItem"] input[type="checkbox"] {
  @apply w-4 h-4 rounded cursor-pointer flex-shrink-0;
  appearance: none;
  background: var(--checkbox-bg);
  border: 1.5px solid var(--checkbox-border);
  border-radius: 3px;
}
.ProseMirror li[data-type="taskItem"] input[type="checkbox"]:checked {
  @apply bg-[#7c3aed] border-[#7c3aed];
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3E%3C/svg%3E");
  background-size: 100%;
  background-position: center;
  background-repeat: no-repeat;
}
.ProseMirror li[data-type="taskItem"] input[type="checkbox"]:hover {
  @apply border-[#7c3aed];
}
.ProseMirror li[data-type="taskItem"] input[type="checkbox"]:checked + div {
  @apply line-through;
  color: var(--strikethrough);
}

/* [Velt] Velt components automatically adapt if we use their exposed CSS variables (if needed in the future).
   Avoid wildcard (*) selectors inside Velt containers as they cause severe layout thrashing and freezing. */
